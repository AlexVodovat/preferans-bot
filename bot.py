from aiogram import Bot, Dispatcher, types
from aiogram.types import ReplyKeyboardMarkup, KeyboardButton, Message
from aiogram.utils import executor
import logging
import os

API_TOKEN = os.getenv("API_TOKEN")

logging.basicConfig(level=logging.INFO)
bot = Bot(token=API_TOKEN)
dp = Dispatcher(bot)

# –¢–µ—Å—Ç—ã –ø–æ —Ç–µ–º–∞–º
tests = {
    "üìò –ë–∞–∑–æ–≤—ã–π": {
        "questions": [
            "1. –°–∫–æ–ª—å–∫–æ –∫–∞—Ä—Ç –≤ —Ä—É–∫–µ —É –∏–≥—Ä–æ–∫–∞ –≤ –ø—Ä–µ—Ñ–µ—Ä–∞–Ω—Å–µ?",
            "2. –ß—Ç–æ —Ç–∞–∫–æ–µ —Ç–æ—Ä–≥–æ–≤–ª—è?",
            "3. –ß—Ç–æ —Ç–∞–∫–æ–µ –º–∏–∑–µ—Ä?",
            "4. –ß—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç '10 –≤–∑—è—Ç–æ–∫'?",
            "5. –°–∫–æ–ª—å–∫–æ –∫–∞—Ä—Ç –≤ –ø—Ä–∏–∫—É–ø–µ?",
            "6. –ö—Ç–æ –∑–∞–±–∏—Ä–∞–µ—Ç –ø—Ä–∏–∫—É–ø –ø–æ—Å–ª–µ –≤—ã–∏–≥—Ä—ã—à–∞ —Ç–æ—Ä–≥–æ–≤?",
            "7. –ö—Ç–æ –Ω–∞—á–∏–Ω–∞–µ—Ç —Ç–æ—Ä–≥–æ–≤–ª—é?",
            "8. –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç, –µ—Å–ª–∏ –≤—Å–µ –ø–∞—Å—É—é—Ç?",
            "9. –ö–∞–∫ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∫–æ–∑—ã—Ä—å?",
            "10. –ö–∞–∫–∞—è –∫–∞—Ä—Ç–∞ —Å—Ç–∞—Ä—à–µ ‚Äî —Ç—É–∑ –∏–ª–∏ –∫–æ—Ä–æ–ª—å?"
        ],
        "options": [
            ['a) 8', 'b) 9', 'c) 10', 'd) 11'],
            ['a) –†–∞–∑–¥–∞—á–∞ –∫–∞—Ä—Ç', 'b) –¢–æ—Ä–≥ –∑–∞ –∑–∞–∫–∞–∑', 'c) –ü–æ–¥—Å—á—ë—Ç –æ—á–∫–æ–≤', 'd) –°–¥–∞—á–∞'],
            ['a) –ó–∞–∫–∞–∑ 10 –≤–∑—è—Ç–æ–∫', 'b) –ü–æ–ø—ã—Ç–∫–∞ –Ω–µ –≤–∑—è—Ç—å –Ω–∏ –æ–¥–Ω–æ–π –≤–∑—è—Ç–∫–∏', 'c) –ö–æ–º–∞–Ω–¥–Ω–∞—è –∏–≥—Ä–∞', 'd) –ü–∞—Å'],
            ['a) –ß–∏—Å–ª–æ –∏–≥—Ä–æ–∫–æ–≤', 'b) –ö–æ–ª-–≤–æ –≤–∑—è—Ç–æ–∫ –Ω–∞ —Ä—É–∫–∞—Ö', 'c) –ö–æ–ª-–≤–æ –∫–∞—Ä—Ç –≤ –ø—Ä–∏–∫—É–ø–µ', 'd) –í–∏–¥ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞'],
            ['a) 1', 'b) 2', 'c) 3', 'd) 4'],
            ['a) –ü–∞—Å—É—é—â–∏–π', 'b) –ò–≥—Ä–æ–∫, —Å–¥–µ–ª–∞–≤—à–∏–π –∑–∞–∫–∞–∑', 'c) –°–¥–∞—é—â–∏–π', 'd) –ò–≥—Ä–æ–∫ —Å–ª–µ–≤–∞ –æ—Ç —Å–¥–∞—é—â–µ–≥–æ'],
            ['a) –°–¥–∞—é—â–∏–π', 'b) –ò–≥—Ä–æ–∫ —Å–ª–µ–≤–∞ –æ—Ç —Å–¥–∞—é—â–µ–≥–æ', 'c) –ü–æ–±–µ–¥–∏—Ç–µ–ª—å –ø—Ä–æ—à–ª–æ–π —Å–¥–∞—á–∏', 'd) –°–ª—É—á–∞–π–Ω—ã–π –∏–≥—Ä–æ–∫'],
            ['a) –ò–≥—Ä–∞ –æ—Ç–º–µ–Ω—è–µ—Ç—Å—è', 'b) –ò–≥—Ä–∞—é—Ç —Ä–∞—Å–ø–∞—Å—ã', 'c) –ú–∏–∑–µ—Ä –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π', 'd) –†–∞–∑–¥–∞—á–∞ –∑–∞–Ω–æ–≤–æ'],
            ['a) –ü–æ –º–∞—Å—Ç–∏ –ø—Ä–∏–∫—É–ø–∞', 'b) –ù–µ—Ç –∫–æ–∑—ã—Ä—è', 'c) –ò–≥—Ä–æ–∫ –Ω–∞–∑–Ω–∞—á–∞–µ—Ç', 'd) –ü–æ –¥–æ–≥–æ–≤–æ—Ä—ë–Ω–Ω–æ—Å—Ç–∏'],
            ['a) –ö–æ—Ä–æ–ª—å', 'b) –î–∞–º–∞', 'c) –í–∞–ª–µ—Ç', 'd) –¢—É–∑']
        ],
        "answers": ['c', 'b', 'b', 'b', 'b', 'b', 'b', 'b', 'c', 'd'],
        "explanations": [
            "‚úÖ 10 –∫–∞—Ä—Ç ‚Äî —Å—Ç–∞–Ω–¥–∞—Ä—Ç –≤ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–º –ø—Ä–µ—Ñ–µ—Ä–∞–Ω—Å–µ.",
            "‚úÖ –¢–æ—Ä–≥–æ–≤–ª—è ‚Äî —ç—Ç–∞–ø, –≥–¥–µ –∏–≥—Ä–æ–∫–∏ –¥–µ–ª–∞—é—Ç –∑–∞—è–≤–∫–∏ (–ø–∞—Å—ã –∏–ª–∏ –∑–∞–∫–∞–∑—ã).",
            "‚úÖ –ú–∏–∑–µ—Ä ‚Äî –∫–æ–Ω—Ç—Ä–∞–∫—Ç, –ø—Ä–∏ –∫–æ—Ç–æ—Ä–æ–º –Ω—É–∂–Ω–æ –Ω–µ –≤–∑—è—Ç—å –Ω–∏ –æ–¥–Ω–æ–π –≤–∑—è—Ç–∫–∏.",
            "‚úÖ 10 –≤–∑—è—Ç–æ–∫ ‚Äî –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –∫–∞—Ä—Ç –Ω–∞ —Ä—É–∫–∞—Ö (3√ó10 + 2 –≤ –ø—Ä–∏–∫—É–ø–µ).",
            "‚úÖ –í –ø—Ä–∏–∫—É–ø–µ 2 –∫–∞—Ä—Ç—ã.",
            "‚úÖ –ü—Ä–∏–∫—É–ø –±–µ—Ä—ë—Ç –∏–≥—Ä–æ–∫, —Å–¥–µ–ª–∞–≤—à–∏–π –∑–∞–∫–∞–∑.",
            "‚úÖ –¢–æ—Ä–≥–æ–≤–ª—é –Ω–∞—á–∏–Ω–∞–µ—Ç –∏–≥—Ä–æ–∫ —Å–ª–µ–≤–∞ –æ—Ç —Å–¥–∞—é—â–µ–≥–æ.",
            "‚úÖ –ï—Å–ª–∏ –≤—Å–µ –ø–∞—Å—É—é—Ç ‚Äî –∏–≥—Ä–∞—é—Ç —Ä–∞—Å–ø–∞—Å—ã (–≤—Å–µ —Å—Ç–∞—Ä–∞—é—Ç—Å—è –Ω–µ –≤–∑—è—Ç—å –≤–∑—è—Ç–∫–∏).",
            "‚úÖ –ö–æ–∑—ã—Ä—å –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø—Ä–∏ –≤—ã–±–æ—Ä–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞.",
            "‚úÖ –¢—É–∑ ‚Äî —Å—Ç–∞—Ä—à–∞—è –∫–∞—Ä—Ç–∞ –≤ –º–∞—Å—Ç–∏ (–æ—Ç 7 –¥–æ —Ç—É–∑–∞ –ø–æ –≤–æ–∑—Ä–∞—Å—Ç–∞–Ω–∏—é)."
        ]
    },
    "üåÄ –†–∞—Å–ø–∞—Å—ã": {
        "questions": [
            "1. –ß—Ç–æ —Ç–∞–∫–æ–µ —Ä–∞—Å–ø–∞—Å–æ–≤–∫–∞?",
            "2. –ö–æ–≥–¥–∞ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç —Ä–∞—Å–ø–∞—Å–æ–≤–∫–∞?",
            "3. –°–∫–æ–ª—å–∫–æ –æ—á–∫–æ–≤ –∑–∞ –≤–∑—è—Ç–∫—É –≤ —Ä–∞—Å–ø–∞—Å–µ?",
            "4. –°–∫–æ–ª—å–∫–æ –≤–∑—è—Ç–æ–∫ –æ–ø–∞—Å–Ω–æ –≤–∑—è—Ç—å?",
            "5. –ö–∞–∫–æ–π –∫–∞—Ä—Ç–æ–π –≤—ã–≥–æ–¥–Ω–æ —Ö–æ–¥–∏—Ç—å?",
            "6. –ß—Ç–æ –∑–Ω–∞—á–∏—Ç '–ø–æ–¥—Å—Ç–∞–≤–∏—Ç—å –ø–æ–¥ —Ç—É–∑–∞'?",
            "7. –ö–æ–≥–¥–∞ —Ä–∞—Å–ø–∞—Å –Ω–µ –∑–∞—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è?",
            "8. –ß—Ç–æ –¥–µ–ª–∞—Ç—å —Å —Ç—É–∑–∞–º–∏ –≤ —Ä—É–∫–µ?",
            "9. –ö–∞–∫ –Ω–∞—á–∏—Å–ª—è—é—Ç—Å—è –æ—á–∫–∏?",
            "10. –ú–æ–∂–Ω–æ –ª–∏ —Å—ã–≥—Ä–∞—Ç—å —Ä–∞—Å–ø–∞—Å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –ø–æ–¥—Ä—è–¥?"
        ],
        "options": [
            ['a) –í—Å–µ –∏–≥—Ä–∞—é—Ç –Ω–∞ –º–∞–∫—Å–∏–º—É–º', 'b) –ó–∞–∫–∞–∑ —Å –≤–∏—Å—Ç–æ–π', 'c) –í—Å–µ –∏–∑–±–µ–≥–∞—é—Ç –≤–∑—è—Ç–æ–∫', 'd) –ù–∏–∫—Ç–æ –Ω–µ —É—á–∞—Å—Ç–≤—É–µ—Ç'],
            ['a) –ü–æ –∂–µ–ª–∞–Ω–∏—é', 'b) –ï—Å–ª–∏ –≤—Å–µ –ø–∞—Å—É—é—Ç', 'c) –ü–æ—Å–ª–µ –º–∏–∑–µ—Ä–∞', 'd) –ï—Å–ª–∏ –∏–≥—Ä–æ–∫ –Ω–µ –≥–æ—Ç–æ–≤'],
            ['a) 1', 'b) 5', 'c) 10', 'd) 0'],
            ['a) 1‚Äì2', 'b) 3‚Äì4', 'c) 5 –∏ –±–æ–ª—å—à–µ', 'd) –õ—é–±–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ'],
            ['a) –¢—É–∑', 'b) –°–µ–º—ë—Ä–∫–∞', 'c) –í–∞–ª–µ—Ç', 'd) –î–µ—Å—è—Ç–∫–∞'],
            ['a) –•–æ–¥–∏—Ç—å –ø–æ—Å–ª–µ –Ω–µ–≥–æ', 'b) –í—ã–º–∞–Ω–∏—Ç—å —Ç—É–∑–∞', 'c) –ü–æ–ª–æ–∂–∏—Ç—å —Ç—É–∑–∞ –≤ –∫–æ–Ω—Ü–µ', 'd) –í–∑—è—Ç—å –≤–∑—è—Ç–∫—É'],
            ['a) –ï—Å–ª–∏ –∫—Ç–æ-—Ç–æ –≤–∑—è–ª 0 –≤–∑—è—Ç–æ–∫', 'b) –ï—Å–ª–∏ –∫—Ç–æ-—Ç–æ –≤—Å—ë –≤–∑—è–ª', 'c) –ï—Å–ª–∏ –Ω–∏–∫—Ç–æ –Ω–µ –≤–∑—è–ª –≤–∑—è—Ç–æ–∫', 'd) –í—Å–µ –ø—Ä–æ–∏–≥—Ä–∞–ª–∏'],
            ['a) –ë—Ä–∞—Ç—å –≤–∑—è—Ç–∫–∏', 'b) –ò–≥—Ä–∞—Ç—å –º–∏–∑–µ—Ä', 'c) –°–∫–∏–Ω—É—Ç—å –∏—Ö –∫–∞–∫ –º–æ–∂–Ω–æ —Ä–∞–Ω—å—à–µ', 'd) –ù–µ –±—Ä–∞—Ç—å –∏—Ö –≤ —Ä–∞—Å—á—ë—Ç'],
            ['a) –¢–æ–ª—å–∫–æ –ø—Ä–æ–∏–≥—Ä–∞–≤—à–µ–º—É', 'b) –í—Å–µ–º, –∫—Ç–æ –≤–∑—è–ª –≤–∑—è—Ç–∫–∏', 'c) –ü–æ–±–µ–¥–∏—Ç–µ–ª—é', 'd) –ù–∏–∫–æ–º—É'],
            ['a) –ù–µ—Ç', 'b) –î–∞, –µ—Å–ª–∏ –Ω–∏–∫—Ç–æ –Ω–µ –±–µ—Ä—ë—Ç –∑–∞–∫–∞–∑', 'c) –¢–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –º–∏–∑–µ—Ä–∞', 'd) –û–¥–∏–Ω —Ä–∞–∑ –∑–∞ –∫—Ä—É–≥']
        ],
        "answers": ['c', 'b', 'c', 'c', 'b', 'b', 'c', 'c', 'b', 'b'],
        "explanations": [
            "‚úÖ –†–∞—Å–ø–∞—Å ‚Äî —Ü–µ–ª—å –Ω–µ –±—Ä–∞—Ç—å –≤–∑—è—Ç–∫–∏.",
            "‚úÖ –ï—Å–ª–∏ –≤—Å–µ –ø–∞—Å—É—é—Ç –≤ —Ç–æ—Ä–≥–æ–≤–ª–µ ‚Äî –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Ä–∞—Å–ø–∞—Å–æ–≤–∫–∞.",
            "‚úÖ –ó–∞ –∫–∞–∂–¥—É—é –≤–∑—è—Ç–∫—É –∏–≥—Ä–æ–∫ –ø–æ–ª—É—á–∞–µ—Ç 10 —à—Ç—Ä–∞—Ñ–Ω—ã—Ö –æ—á–∫–æ–≤.",
            "‚úÖ 5 –≤–∑—è—Ç–æ–∫ = 50 —à—Ç—Ä–∞—Ñ–Ω—ã—Ö –æ—á–∫–æ–≤ ‚Äî –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è —Ç–æ—á–∫–∞.",
            "‚úÖ –°–µ–º—ë—Ä–∫–∞ ‚Äî —Å–∞–º–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–∞—è –¥–ª—è —Ö–æ–¥–∞ –∫–∞—Ä—Ç–∞.",
            "‚úÖ '–ü–æ–¥—Å—Ç–∞–≤–∏—Ç—å –ø–æ–¥ —Ç—É–∑–∞' ‚Äî –≤—ã–º–∞–Ω–∏—Ç—å –µ–≥–æ —É —Å–æ–ø–µ—Ä–Ω–∏–∫–∞.",
            "‚úÖ –ï—Å–ª–∏ –Ω–∏–∫—Ç–æ –Ω–µ –≤–∑—è–ª –≤–∑—è—Ç–æ–∫ ‚Äî —Ä–∞—Å–ø–∞—Å –ø–µ—Ä–µ–∏–≥—Ä—ã–≤–∞–µ—Ç—Å—è.",
            "‚úÖ –ò–∑–±–∞–≤—å—Å—è –æ—Ç —Ç—É–∑–æ–≤ –∫–∞–∫ –º–æ–∂–Ω–æ —Ä–∞–Ω—å—à–µ.",
            "‚úÖ –ó–∞ –∫–∞–∂–¥—É—é –≤–∑—è—Ç–∫—É –∏–≥—Ä–æ–∫—É –Ω–∞—á–∏—Å–ª—è–µ—Ç—Å—è 10 –æ—á–∫–æ–≤.",
            "‚úÖ –†–∞—Å–ø–∞—Å –º–æ–∂–µ—Ç –ø–æ–≤—Ç–æ—Ä—è—Ç—å—Å—è, –µ—Å–ª–∏ –Ω–∏–∫—Ç–æ –Ω–µ –∑–∞–∫–∞–∑—ã–≤–∞–µ—Ç –∏–≥—Ä—É."
        ]
    },
    "‚ô£Ô∏è –í–∏—Å—Ç—ã": {
        "questions": [
            "1. –ß—Ç–æ —Ç–∞–∫–æ–µ –≤–∏—Å—Ç?",
            "2. –ö–æ–≥–¥–∞ –∏–≥—Ä–æ–∫ –≤–∏—Å—Ç—ã –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω?",
            "3. –°–∫–æ–ª—å–∫–æ –∏–≥—Ä–æ–∫–æ–≤ –º–æ–∂–µ—Ç –≤—ã—Å—Ç–∞–≤–∏—Ç—å –≤–∏—Å—Ç?",
            "4. –ö–∞–∫ –≤–ª–∏—è–µ—Ç –≤–∏—Å—Ç –Ω–∞ –æ—á–∫–∏?",
            "5. –ö—Ç–æ –º–æ–∂–µ—Ç –ø–∞—Å–æ–≤–∞—Ç—å –ø—Ä–∏ –≤–∏—Å—Ç–µ?",
            "6. –ú–æ–∂–Ω–æ –ª–∏ –æ—Ç–∫–∞–∑–∞—Ç—å—Å—è –æ—Ç –≤–∏—Å—Ç–∞?",
            "7. –í–∏—Å—Ç—É—é—Ç –ª–∏ –ø—Ä–æ—Ç–∏–≤ –º–∏–∑–µ—Ä–∞?",
            "8. –ö—Ç–æ –¥–µ–ª–∞–µ—Ç –ø–µ—Ä–≤—ã–π –≤–∏—Å—Ç?",
            "9. –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç, –µ—Å–ª–∏ –Ω–∏–∫—Ç–æ –Ω–µ –≤–∏—Å—Ç–æ–≤–∞–µ—Ç?",
            "10. –í–∏—Å—Ç ‚Äî —ç—Ç–æ –∏–≥—Ä–∞ –∏–ª–∏ —Å—Ç–∞–≤–∫–∞?"
        ],
        "options": [
            ['a) –ü–∞—Å –≤ —Ç–æ—Ä–≥–æ–≤–ª–µ', 'b) –°—Ç–∞–≤–∫–∞ –ø—Ä–æ—Ç–∏–≤ –∑–∞–∫–∞–∑—á–∏–∫–∞', 'c) –û—á–∫–æ', 'd) –û—Ç–∫–∞–∑ –æ—Ç –∏–≥—Ä—ã'],
            ['a) –ü—Ä–∏ –ª—é–±–æ–º –∑–∞–∫–∞–∑–µ', 'b) –¢–æ–ª—å–∫–æ –ø—Ä–∏ —Ä–∞—Å–ø–∞—Å–µ', 'c) –ü—Ä–∏ –∏–≥—Ä–µ –±–µ–∑ –≤–∏—Å—Ç–∞', 'd) –ü—Ä–∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–µ —Å –ø—Ä–∏–∫—É–ø–æ–º'],
            ['a) –¢–æ–ª—å–∫–æ –æ–¥–∏–Ω', 'b) –î–≤–æ–µ', 'c) –í—Å–µ, –∫—Ä–æ–º–µ —Å–¥–∞—é—â–µ–≥–æ', 'd) –ù–∏–∫—Ç–æ'],
            ['a) –î–æ–±–∞–≤–ª—è–µ—Ç –æ—á–∫–∏ –∑–∞–∫–∞–∑—á–∏–∫—É', 'b) –£–º–Ω–æ–∂–∞–µ—Ç —à—Ç—Ä–∞—Ñ—ã', 'c) –ú–µ–Ω—è–µ—Ç –ø—Ä–∞–≤–∏–ª–∞ –≤–∑—è—Ç–æ–∫', 'd) –£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Ä–∏—Å–∫–∏ –∏ –±–∞–ª–ª—ã –≤ –ø—É–ª—é'],
            ['a) –ù–∏–∫—Ç–æ', 'b) –í—Å–µ', 'c) –¢–æ–ª—å–∫–æ –∑–∞–∫–∞–∑—á–∏–∫', 'd) –ü–∞—Å—É—é—â–∏–π –∏–≥—Ä–æ–∫'],
            ['a) –ù–µ—Ç', 'b) –ú–æ–∂–Ω–æ', 'c) –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –≤—ã—Å—Ç–∞–≤–∏—Ç—å', 'd) –¢–æ–ª—å–∫–æ –µ—Å–ª–∏ —Ç—Ä–∏ –≤–∏—Å—Ç—É—é—Ç'],
            ['a) –î–∞', 'b) –ù–µ—Ç', 'c) –ò–Ω–æ–≥–¥–∞', 'd) –¢–æ–ª—å–∫–æ –≤ –ø—É–ª—è—Ö'],
            ['a) –ò–≥—Ä–æ–∫ —Å–ª–µ–≤–∞', 'b) –°–¥–∞—é—â–∏–π', 'c) –ü–æ –æ—á–µ—Ä–µ–¥–∏', 'd) –ù–∏–∫—Ç–æ'],
            ['a) –ò–≥—Ä–∞ –æ—Ç–º–µ–Ω—è–µ—Ç—Å—è', 'b) –ò–≥—Ä–∞–µ—Ç —Ç–æ–ª—å–∫–æ –∑–∞–∫–∞–∑—á–∏–∫', 'c) –í–∏—Å—Ç—É–µ—Ç—Å—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ', 'd) –ó–∞–∫–∞–∑—á–∏–∫ –∏–≥—Ä–∞–µ—Ç —Å–æ–ª–æ'],
            ['a) –ò–≥—Ä–∞', 'b) –û–±—è–∑–∞–Ω–Ω–æ—Å—Ç—å', 'c) –°—Ç–∞–≤–∫–∞ –ø—Ä–æ—Ç–∏–≤', 'd) –í–∏–¥ —Ç–æ—Ä–≥–æ–≤–ª–∏']
        ],
        "answers": ['b', 'd', 'c', 'd', 'd', 'b', 'b', 'a', 'd', 'c'],
        "explanations": [
            "‚úÖ –í–∏—Å—Ç ‚Äî —Å—Ç–∞–≤–∫–∞ –ø—Ä–æ—Ç–∏–≤ –∏–≥—Ä–æ–∫–∞, –≤–∑—è–≤—à–µ–≥–æ –ø—Ä–∏–∫—É–ø.",
            "‚úÖ –í–∏—Å—Ç –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –ø—Ä–∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–µ —Å –ø—Ä–∏–∫—É–ø–æ–º.",
            "‚úÖ –í—Å–µ, –∫—Ä–æ–º–µ —Å–¥–∞—é—â–µ–≥–æ –∏ –∑–∞–∫–∞–∑—á–∏–∫–∞, –º–æ–≥—É—Ç –≤—ã—Å—Ç–∞–≤–∏—Ç—å –≤–∏—Å—Ç.",
            "‚úÖ –í–∏—Å—Ç —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Å—Ç–∞–≤–∫—É –∏ —Ä–∏—Å–∫ –≤ –ø—É–ª—å–Ω–æ–π –∑–∞–ø–∏—Å–∏.",
            "‚úÖ –¢–æ–ª—å–∫–æ –ø–∞—Å—É—é—â–∏–π –∏–≥—Ä–æ–∫ –º–æ–∂–µ—Ç –≤—ã—Å—Ç–∞–≤–∏—Ç—å –≤–∏—Å—Ç.",
            "‚úÖ –ú–æ–∂–Ω–æ –æ—Ç–∫–∞–∑–∞—Ç—å—Å—è –æ—Ç –≤–∏—Å—Ç–∞, –µ—Å–ª–∏ –Ω–µ —Ö–æ—á–µ—à—å –∏–≥—Ä–∞—Ç—å –ø—Ä–æ—Ç–∏–≤.",
            "‚úÖ –ü—Ä–æ—Ç–∏–≤ –º–∏–∑–µ—Ä–∞ –Ω–µ –≤–∏—Å—Ç–æ–≤—É—é—Ç.",
            "‚úÖ –ü–µ—Ä–≤—ã–π –≤–∏—Å—Ç –¥–µ–ª–∞–µ—Ç –∏–≥—Ä–æ–∫ —Å–ª–µ–≤–∞ –æ—Ç –∑–∞–∫–∞–∑—á–∏–∫–∞.",
            "‚úÖ –ï—Å–ª–∏ –Ω–∏–∫—Ç–æ –Ω–µ –≤—ã—Å—Ç–∞–≤–∏–ª –≤–∏—Å—Ç ‚Äî –∑–∞–∫–∞–∑—á–∏–∫ –∏–≥—Ä–∞–µ—Ç —Å–æ–ª–æ.",
            "‚úÖ –í–∏—Å—Ç ‚Äî —ç—Ç–æ —Å—Ç–∞–≤–∫–∞ –ø—Ä–æ—Ç–∏–≤, –∞ –Ω–µ –æ—Ç–¥–µ–ª—å–Ω–∞—è –∏–≥—Ä–∞."
        ]
    }
}

# –ö–Ω–æ–ø–∫–∏ –≥–ª–∞–≤–Ω–æ–≥–æ –º–µ–Ω—é
main_menu = ReplyKeyboardMarkup(resize_keyboard=True)
main_menu.add(
    KeyboardButton("üìò –ë–∞–∑–æ–≤—ã–π"),
    KeyboardButton("üåÄ –†–∞—Å–ø–∞—Å—ã"),
    KeyboardButton("‚ô£Ô∏è –í–∏—Å—Ç—ã")
)

@dp.message_handler(commands=["start"])
async def start_handler(msg: Message):
    await msg.answer("–ü—Ä–∏–≤–µ—Ç! –í—ã–±–µ—Ä–∏ —Ç–µ—Å—Ç –ø–æ –ø—Ä–µ—Ñ–µ—Ä–∞–Ω—Å—É üëá", reply_markup=main_menu)

@dp.message_handler(lambda msg: msg.text in tests)
async def send_test(msg: Message):
    test = tests[msg.text]
    questions = test["questions"]
    options = test["options"]
    text = "\n\n".join(
        f"{q}\n" + "\n".join(options[i])
        for i, q in enumerate(questions)
    )
    await msg.answer(f"–û—Ç–ø—Ä–∞–≤—å —Å–≤–æ–∏ –æ—Ç–≤–µ—Ç—ã –≤ —Ñ–æ—Ä–º–∞—Ç–µ:\n`1-a, 2-c, 3-b...`\n\nüìù –í–æ–ø—Ä–æ—Å—ã:\n\n{text}", parse_mode="Markdown")

@dp.message_handler()
async def check_answers(msg: Message):
    try:
        text = msg.text.lower().replace('‚Äì', '-').replace('‚Äî', '-')
        answers = [s.split('-')[1].strip() for s in text.split(',')]
        if len(answers) != 10:
            await msg.reply("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏ –æ—Ç–≤–µ—Ç—ã –Ω–∞ –≤—Å–µ 10 –≤–æ–ø—Ä–æ—Å–æ–≤.")
            return

        for key in tests:
            if len(tests[key]["answers"]) == 10:
                correct = tests[key]["answers"]
                explanations = tests[key]["explanations"]
                break
        else:
            await msg.reply("–ù–µ —É–¥–∞–ª–æ—Å—å –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–π —Ç–µ—Å—Ç.")
            return

        score = 0
        result = []
        for i in range(10):
            if answers[i] == correct[i]:
                status = "‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ"
                score += 1
            else:
                status = f"‚ùå –ù–µ–≤–µ—Ä–Ω–æ (–ø—Ä–∞–≤–∏–ª—å–Ω–æ: {correct[i]})"
            result.append(f"{explanations[i]}\n–¢–≤–æ–π –æ—Ç–≤–µ—Ç: {answers[i].upper()} ‚Äî {status}\n")

        summary = f"\n\nüéØ –ò—Ç–æ–≥: {score} –∏–∑ 10"
        await msg.reply("\n".join(result) + summary)

    except Exception as e:
        await msg.reply("–ß—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫.\n–ü—Ä–æ–≤–µ—Ä—å —Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞: 1-a, 2-c, 3-b...")

if __name__ == "__main__":
    executor.start_polling(dp, skip_updates=True)
